<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Inteligente 2025 | Jaci Brechó & Ampla</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* Identidade Ampla */
            --ampla-blue: #002855;
            --ampla-gold: #d4af37;
            --ampla-hover: #004085;
            /* Identidade Jaci Brechó */
            --jaci-bg: #fdfbf7;
            --white: #ffffff;
            --text-dark: #1a1a1a;
            --text-gray: #666;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f7f9;
            color: var(--text-dark);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 1100px;
            background: var(--white);
            border-radius: 40px;
            display: grid;
            grid-template-columns: 1.2fr 0.8fr;
            overflow: hidden;
            box-shadow: 0 40px 100px rgba(0, 40, 85, 0.12);
        }

        @media (max-width: 950px) {
            .container { grid-template-columns: 1fr; }
        }

        /* Lado Esquerdo - Painel de Configuração */
        .config-panel {
            padding: 50px;
            background: var(--jaci-bg);
            border-right: 1px solid #eee;
        }

        .header-branding {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
        }

        .logo-jaci { height: 70px; object-fit: contain; }
        .logo-ampla { height: 30px; object-fit: contain; filter: grayscale(1) brightness(0.2); }

        h2 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.2rem;
            color: var(--ampla-blue);
            margin-bottom: 30px;
        }

        .input-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .field { margin-bottom: 22px; }
        .full { grid-column: span 2; }

        label {
            display: block;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            color: var(--text-gray);
            margin-bottom: 8px;
        }

        select, input[type="number"] {
            width: 100%;
            padding: 15px;
            border: 2px solid #e8ebef;
            border-radius: 14px;
            font-size: 1rem;
            transition: 0.3s;
        }

        select:focus, input:focus {
            border-color: var(--ampla-gold);
            outline: none;
            background: white;
        }

        /* Controle de Lucro Inteligente */
        .profit-card {
            background: white;
            padding: 25px;
            border-radius: 20px;
            border: 1px solid #e0e6ed;
            margin-top: 10px;
        }

        .insight-text {
            font-size: 0.7rem;
            color: var(--ampla-gold);
            font-weight: 600;
            margin-bottom: 10px;
            display: block;
        }

        input[type="range"] {
            width: 100%;
            height: 6px;
            background: #e0e0e0;
            border-radius: 5px;
            accent-color: var(--ampla-blue);
            cursor: pointer;
        }

        /* Lado Direito - Resultados (Cores Ampla) */
        .result-panel {
            background: var(--ampla-blue);
            color: var(--white);
            padding: 60px 45px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            text-align: center;
        }

        .price-label {
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 4px;
            opacity: 0.7;
        }

        .main-price {
            font-family: 'Cormorant Garamond', serif;
            font-size: 5.5rem;
            color: var(--ampla-gold);
            margin: 15px 0;
            font-weight: 700;
        }

        .dashboard-box {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 24px;
            padding: 30px;
            margin: 30px 0;
        }

        .row {
            display: flex;
            justify-content: space-between;
            padding: 14px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.95rem;
        }

        .row:last-child { border: none; }

        .profit-highlight {
            font-weight: 600;
            color: var(--ampla-gold);
        }

        .footer-info {
            font-size: 0.65rem;
            opacity: 0.5;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            line-height: 1.6;
        }

        .markup-badge {
            display: inline-block;
            background: rgba(212, 175, 55, 0.15);
            color: var(--ampla-gold);
            padding: 6px 15px;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 700;
            margin-top: 10px;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="config-panel">
        <div class="header-branding">
            <img src="jaci.png" alt="Jaci Brechó" class="logo-jaci" onerror="this.style.display='none'; this.after('JACI BRECHÓ')">
            <img src="ampla.png" alt="Ampla" class="logo-ampla" onerror="this.style.display='none'; this.after('AMPLA')">
        </div>

        <h2>Curadoria 2025</h2>

        <div class="input-grid">
            <div class="field full">
                <label>Categoria Circular</label>
                <select id="categoria" onchange="aplicarInteligencia()">
                    <option value="43.12" data-lucro="75" data-msg="PEÇA VINTAGE: Valor histórico permite margem alta.">Vintage (Exclusiva)</option>
                    <option value="48.78" data-lucro="70" data-msg="GRIFE: O status da marca suporta valor premium.">Marcas / Grife</option>
                    <option value="45.60" data-lucro="62" data-msg="CALÇADOS: Margem média para alta rotatividade.">Calçados</option>
                    <option value="40.12" data-lucro="55" data-msg="PARTE DE CIMA: Peças básicas para giro rápido.">Peças de Cima (Tops/T-shirts)</option>
                    <option value="44.07" data-lucro="58" data-msg="PARTE DE BAIXO: Peças essenciais de curadoria.">Peças de Baixo (Calças/Saias)</option>
                    <option value="24.77" data-lucro="80" data-msg="ACESSÓRIOS: Baixo custo operacional, margem máxima.">Acessórios</option>
                </select>
            </div>

            <div class="field">
                <label>Preço de Aquisição (R$)</label>
                <input type="number" id="v_compra" value="15.00" step="0.01" oninput="calcular()">
            </div>

            <div class="field">
                <label>Processamento/Limpeza (R$)</label>
                <input type="number" id="v_limpeza" value="5.00" step="0.01" oninput="calcular()">
            </div>

            <div class="field full">
                <div class="profit-card">
                    <span id="inteligencia_msg" class="insight-text">Analisando categoria...</span>
                    <label style="color: var(--ampla-blue);">Margem de Lucro: <strong id="lbl_margem">70%</strong></label>
                    <input type="range" id="margem_range" min="20" max="90" value="70" oninput="updateMargem(this.value)">
                </div>
            </div>

            <div class="field full">
                <label>Custo Fixo Mensal por Peça (R$)</label>
                <input type="number" id="v_fixo" value="30.61" step="0.01" oninput="calcular()">
                <p style="font-size: 0.6rem; color: #999; margin-top: 8px;">*Cálculo baseado em Pró-labore + Contas mensais / meta de vendas.</p>
            </div>
        </div>
    </div>

    <div class="result-panel">
        <div>
            <span class="price-label">Valor de Venda Recomendado</span>
            <h1 class="main-price" id="res_venda">R$ 0,00</h1>
            <div id="markup_badge" class="markup-badge">MARKUP: 1.0x</div>
        </div>

        <div class="dashboard-box">
            <div class="row">
                <span>Custo Total Unitário</span>
                <span id="det_custo">R$ 0,00</span>
            </div>
            <div class="row">
                <span>Investimento Fixo Ampla</span>
                <span id="det_fixo">R$ 0,00</span>
            </div>
            <div class="row">
                <span>Lucro Bruto Líquido</span>
                <span id="det_lucro" class="profit-highlight">R$ 0,00</span>
            </div>
        </div>

        <div class="footer-info">
            Sistema de Inteligência Circular<br>
            <strong>Jaci Brechó × Ampla Consultoria</strong><br>
            © 2025 – Todos os direitos reservados
        </div>
    </div>
</div>

<script>
    function updateMargem(val) {
        document.getElementById('lbl_margem').innerText = val + "%";
        calcular();
    }

    function aplicarInteligencia() {
        const select = document.getElementById('categoria');
        const opt = select.options[select.selectedIndex];
        
        const margemSugerida = opt.getAttribute('data-lucro');
        const msg = opt.getAttribute('data-msg');

        // Atualizar Slider
        document.getElementById('margem_range').value = margemSugerida;
        document.getElementById('lbl_margem').innerText = margemSugerida + "%";
        document.getElementById('inteligencia_msg').innerText = "ESTRATÉGIA: " + msg;

        // Regra especial da planilha: Acessórios não carregam custo fixo total
        if(opt.text.includes("Acessórios")) {
            document.getElementById('v_fixo').value = 0;
        } else if(document.getElementById('v_fixo').value == 0) {
            document.getElementById('v_fixo').value = 30.61;
        }

        calcular();
    }

    function calcular() {
        const compra = parseFloat(document.getElementById('v_compra').value) || 0;
        const limpeza = parseFloat(document.getElementById('v_limpeza').value) || 0;
        const fixo = parseFloat(document.getElementById('v_fixo').value) || 0;
        const margem = parseFloat(document.getElementById('margem_range').value) || 0;

        const custoTotal = compra + limpeza + fixo;
        
        // Cálculo de Margem Comercial (Price over Margin)
        // Fórmula: Preço = Custo / (1 - Margem%)
        let precoFinal = 0;
        if (margem < 100) {
            precoFinal = custoTotal / (1 - (margem / 100));
        }

        const lucroLíquido = precoFinal - custoTotal;
        const markup = precoFinal / custoTotal;

        // Formatação Moeda
        const f = (v) => v.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });

        // Update UI
        document.getElementById('res_venda').innerText = f(precoFinal);
        document.getElementById('det_custo').innerText = f(compra + limpeza);
        document.getElementById('det_fixo').innerText = f(fixo);
        document.getElementById('det_lucro').innerText = f(lucroLíquido);
        document.getElementById('markup_badge').innerText = "MARKUP: " + markup.toFixed(2) + "x";
    }

    // Inicialização
    window.onload = aplicarInteligencia;
</script>

</body>
</html>
